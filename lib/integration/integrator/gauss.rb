class Integration::Gauss < Integration::Integrator
  def result
    fail "Invalid number of spaced abscissas #{n}, should be 1-10" if n > 10 || n < 1
    (0..n).to_a.reduce(0.0) do |memo, i|
      t = ((lower_bound.to_f + upper_bound.to_f) / 2.0) + (step * z[i - 1])
      memo + w[i - 1] * func[t]
    end * step
  end

  def z
    case n
    when 1 then [0.0]
    when 2 then [-0.57735026919, 0.57735026919]
    when 3 then [-0.774596669241, 0.0, 0.774596669241]
    when 4 then [-0.861136311594, -0.339981043585, 0.339981043585, 0.861136311594]
    when 5 then [-0.906179845939, -0.538469310106, 0.0, 0.538469310106, 0.906179845939]
    when 6 then [-0.932469514203, -0.661209386466, -0.238619186083, 0.238619186083, 0.661209386466, 0.932469514203]
    when 7 then [-0.949107912343, -0.741531185599, -0.405845151377, 0.0, 0.405845151377, 0.741531185599, 0.949107912343]
    when 8 then [-0.960289856498, -0.796666477414, -0.525532409916, -0.183434642496, 0.183434642496, 0.525532409916, 0.796666477414, 0.960289856498]
    when 9 then [-0.968160239508, -0.836031107327, -0.613371432701, -0.324253423404, 0.0, 0.324253423404, 0.613371432701, 0.836031107327, 0.968160239508]
    when 10 then [-0.973906528517, -0.865063366689, -0.679409568299, -0.433395394129, -0.148874338982, 0.148874338982, 0.433395394129, 0.679409568299, 0.865063366689, 0.973906528517]
    end
  end

  def w
    case n
    when 1 then [2.0]
    when 2 then [1.0, 1.0]
    when 3 then [0.555555555556, 0.888888888889, 0.555555555556]
    when 4 then [0.347854845137, 0.652145154863, 0.652145154863, 0.347854845137]
    when 5 then [0.236926885056, 0.478628670499, 0.568888888889, 0.478628670499, 0.236926885056]
    when 6 then [0.171324492379, 0.360761573048, 0.467913934573, 0.467913934573, 0.360761573048, 0.171324492379]
    when 7 then [0.129484966169, 0.279705391489, 0.381830050505, 0.417959183673, 0.381830050505, 0.279705391489, 0.129484966169]
    when 8 then [0.10122853629, 0.222381034453, 0.313706645878, 0.362683783378, 0.362683783378, 0.313706645878, 0.222381034453, 0.10122853629]
    when 9 then [0.0812743883616, 0.180648160695, 0.260610696403, 0.31234707704, 0.330239355001, 0.31234707704, 0.260610696403, 0.180648160695, 0.0812743883616]
    when 10 then [0.0666713443087, 0.149451349151, 0.219086362516, 0.26926671931, 0.295524224715, 0.295524224715, 0.26926671931, 0.219086362516, 0.149451349151, 0.0666713443087]
    end
  end
end
